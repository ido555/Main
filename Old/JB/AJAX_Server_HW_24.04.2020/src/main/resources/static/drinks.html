<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script>
        $(function () {
            // add one
            
            $("#btn1").click(function () {
                if ($("#addName").val() == "") {
                    $("#result").html("drink name cant be empty")
                    return
                }
                let drink = {
                    name: $("#addName").val(),
                    alcohol: $("#addAlcoPrecentage").val(),
                    price: $("#addPrice").val(),
                }
                $.ajax({
                    url: "drinks/add",
                    type: "POST",
                    data: JSON.stringify(drink),
                    contentType: "application/json",
                    success: function () {
                        $("#result").html("drink added")
                    }
                })
            })
            // get by index
            $("#btn2").click(function () {
                $.ajax({
                    url: "drinks/getOne?i=" + $("#getByIndex").val(),
                    type: 'GET',
                    success: function (drink) {
                        $("#result").html("<h3>Drink:</h3>")
                        $("#result").append("name: " + drink.name
                            + ", alcohol precentage: " + drink.alcohol + "%"
                            + ", price: " + drink.price + "$" + "<br />");
                    },
                    error: function () {
                        $("#result").html("<h3>no such drink found</h3>")
                    }

                })
            })
            // get by name
            $("#btn3").click(function () {
                $.ajax({
                    url: "drinks/getByName?name=" + $("#getByName").val(),
                    type: 'GET',
                    success: function (drink) {
                        $("#result").html("<h3>Drink:</h3>")
                        $("#result").append("name: " + drink.name
                            + ", alcohol precentage: " + drink.alcohol + "%"
                            + ", price: " + drink.price + "$" + "<br />");
                    },
                    error: function () {
                        $("#result").html("<h3>no such drink found</h3>")
                    }

                })
            })
            // delete by index
            $("#btn4").click(function () {
                let i = $("#deleteByIndex").val();
                $.ajax({
                    url: "drinks/delete/" + i,
                    type: 'DELETE',
                    success: function () {
                        $("#result").html("<h3>drink deleted</h3>")
                    },
                    error: function (err) {
                        $("#result").html("<h3>no such drink found</h3>")
                    }

                })
            })
            // get all
            $("#btn5").click(function () {
                
                $("#result").html("<h3>Drinks:</h3>")
                $.ajax({
                    url: "drinks/getAll",
                    type: 'GET',
                    success: function (DBdrinks) {
                        for (let i = 0; i < DBdrinks.length; i++) {
                            $("#result").append("name: " + DBdrinks[i].name
                                + ", alcohol precentage: " + DBdrinks[i].alcohol + "%"
                                + ", price: " + DBdrinks[i].price + "$" + "<br />");
                        }
                    }
                })
            })
        })
    </script>
</head>

<body style="background-color: slategrey;">
    <div>
        <!-- use form? -->
        <input type="text" id="addName" placeholder="Drink name"> <br>
        <input type="number" id="addAlcoPrecentage" placeholder="Alcohol &#37;" max="60" min="1" style="width: 78px; ">
        <br>
        <input type="number" id="addPrice" placeholder="Price" style="width: 78px; " min="1" max="1000">
        <br>
        <button id="btn1">Add drink</button>
    </div><br><br>
    <input type="number" id="getByIndex" min="0"><br>
    <button id="btn2">get drink by index</button><br><br>

    <input type="text" id="getByName"><br>
    <button id="btn3">get drink by name</button><br><br>

    <input type="number" id="deleteByIndex" min="0"><br>
    <button id="btn4">delete drink by index</button><br><br>

    <button id="btn5">get all drinks</button>
    <div id="result"></div>
</body>

</html>